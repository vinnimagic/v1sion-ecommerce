{"ast":null,"code":"import _objectSpread from\"/home/vinicius/\\xC1rea de trabalho/loja-virtual_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[cart,setCart]=useState([]);const[orderHistory,setOrderHistory]=useState([]);useEffect(()=>{const savedCart=localStorage.getItem('cart');if(savedCart)setCart(JSON.parse(savedCart));const savedHistory=localStorage.getItem('orderHistory');if(savedHistory)setOrderHistory(JSON.parse(savedHistory));},[]);const addToCart=product=>{const existingItem=cart.find(item=>item.id===product.id);if(existingItem){setCart(cart.map(item=>item.id===product.id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item));}else{setCart([...cart,_objectSpread(_objectSpread({},product),{},{quantity:1})]);}};const removeFromCart=productId=>{setCart(cart.filter(item=>item.id!==productId));};const updateQuantity=(productId,newQuantity)=>{if(newQuantity<1){removeFromCart(productId);return;}setCart(cart.map(item=>item.id===productId?_objectSpread(_objectSpread({},item),{},{quantity:newQuantity}):item));};const clearCart=()=>{setCart([]);};const addOrderToHistory=order=>{const newHistory=[order,...orderHistory];setOrderHistory(newHistory);localStorage.setItem('orderHistory',JSON.stringify(newHistory));};useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart,orderHistory,addToCart,removeFromCart,updateQuantity,clearCart,addOrderToHistory},children:children});};","map":{"version":3,"names":["createContext","useState","useEffect","jsx","_jsx","CartContext","CartProvider","_ref","children","cart","setCart","orderHistory","setOrderHistory","savedCart","localStorage","getItem","JSON","parse","savedHistory","addToCart","product","existingItem","find","item","id","map","_objectSpread","quantity","removeFromCart","productId","filter","updateQuantity","newQuantity","clearCart","addOrderToHistory","order","newHistory","setItem","stringify","Provider","value"],"sources":["/home/vinicius/Área de trabalho/loja-virtual_react/src/context/CartContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from 'react';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) setCart(JSON.parse(savedCart));\r\n\r\n    const savedHistory = localStorage.getItem('orderHistory');\r\n    if (savedHistory) setOrderHistory(JSON.parse(savedHistory));\r\n  }, []);\r\n\r\n  const addToCart = (product) => {\r\n    const existingItem = cart.find(item => item.id === product.id);\r\n    \r\n    if (existingItem) {\r\n      setCart(cart.map(item => \r\n        item.id === product.id \r\n          ? { ...item, quantity: item.quantity + 1 } \r\n          : item\r\n      ));\r\n    } else {\r\n      setCart([...cart, { ...product, quantity: 1 }]);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = (productId) => {\r\n    setCart(cart.filter(item => item.id !== productId));\r\n  };\r\n\r\n  const updateQuantity = (productId, newQuantity) => {\r\n    if (newQuantity < 1) {\r\n      removeFromCart(productId);\r\n      return;\r\n    }\r\n\r\n    setCart(cart.map(item => \r\n      item.id === productId \r\n        ? { ...item, quantity: newQuantity } \r\n        : item\r\n    ));\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n  };\r\n\r\n  const addOrderToHistory = (order) => {\r\n    const newHistory = [order, ...orderHistory];\r\n    setOrderHistory(newHistory);\r\n    localStorage.setItem('orderHistory', JSON.stringify(newHistory));\r\n  };\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      cart,\r\n      orderHistory,\r\n      addToCart,\r\n      removeFromCart,\r\n      updateQuantity,\r\n      clearCart,\r\n      addOrderToHistory\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}